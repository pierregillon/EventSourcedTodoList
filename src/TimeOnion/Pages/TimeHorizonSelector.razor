@using TimeOnion.Domain.Todo.List
@using TimeOnion.Actions
@inherits BlazorState.BlazorStateComponent

<MudTimeline
    Style="margin-top: 20px"
    TimelineOrientation="TimelineOrientation.Horizontal"
    TimelinePosition="TimelinePosition.Bottom">

    @foreach (var temporality in Enum.GetValues<Temporality>())
    {
        var isCurrent = State.CurrentTemporality == temporality;

        <MudTimelineItem
            Class="timeline-item"
            Color="isCurrent ? Color.Primary : Color.Default"
            Size="isCurrent ? Size.Large : Size.Small"
            Style="cursor: pointer;"
            @onmousedown="() => ChangeCurrentTemporality(temporality)">

            <MudText
                Class="@(isCurrent ? "temporality important" : "temporality")"
                Color="isCurrent ? Color.Primary : Color.Dark"
                Align="Align.Center"
                @onclick="() => ChangeCurrentTemporality(temporality)">
                @temporality.ToText()
            </MudText>

        </MudTimelineItem>
    }

</MudTimeline>

<style>
    
    .mud-timeline-item.timeline-item > .mud-timeline-item-divider{
        min-height: 90px;
        cursor: pointer;
    }
    
    .temporality, .mud-timeline-item-dot.mud-timeline-dot-size-small {
        cursor: pointer;
    }
    
    .temporality.important {
        font-weight: bold
    }
</style>

@code {
    TodoListState State => GetState<TodoListState>();

    private async Task ChangeCurrentTemporality(Temporality temporality)
        => await Mediator.Send(new TodoListState.ChangeCurrentTemporality(temporality));

}